const { get } = require('axios')
const { parse: parseHTML } = require('node-html-parser')

const getThreadsConst = () => (
  // /https:\/\/forum.facepunch.com\/(?:\/*f\/)*(?:[^\/]*)\/([^\/\n]*)/g
  // on https://forum.facepunch.com/f/meta/btczu/LMFAO-Pics-V-The-Shitpost-Archive/1/

  [
    'ybit',
    'xxak',
    'ybpf',
    'xdls',
    'vozo',
    'yyic',
    'bawzy',
    'usmd',
    'xakm',
    'bfhkh',
    'xcpl',
    'bgmwy',
    'belqn',
    'vwlr',
    'zina',
    'yrib',
    'bgwvz',
    'bdhkr',
    'xdsg',
    'wnwj',
    'vlmw',
    'bcrbr',
    'baedh',
    'wabn',
    'bamyo',
    'bgyra',
    'zbgu',
    'bdzoz',
    'bdkvt',
    'xggu',
    'ycpd',
    'beesd',
    'urwa',
    'yoha',
    'yjzn',
    'bayjt',
    'uuzz',
    'usco',
    'bcsky',
    'xtij',
    'bennh',
    'wbcs',
    'bgfud',
    'bgojb',
    'zmzv',
    'bdcmn',
    'ybxe',
    'vhwp',
    'beyhl',
    'zcqp',
    'bfgkd',
    'yzlr',
    'vyww',
    'wiva',
    'xzvg',
    'bfywf',
    'baque',
    'uxfx',
    'uwsc',
    'batfj',
    'vfiq',
    'uuiq',
    'uxrw',
    'vpey',
    'bfcbb',
    'ylaw',
    'yhza',
    'yymo',
    'usin',
    'bbapt',
    'zjqx',
    'uwsg',
    'xyab',
    'bfywn',
    'bcfky',
    'vckz',
    'uryd',
    'bdctd',
    'wkle',
    'zdnw',
    'bfdqv',
    'wvlg',
    'yiwq',
    'utuy',
    'uvpl',
    'beakm',
    'bbajs',
    'vgeq',
    'bfgfz',
    'bgvwt',
    'vexi',
    'wxyq',
    'bahee',
    'bpiwo',
    'bbskr',
    'utvp',
    'uumg',
    'bjgjy',
    'urqu',
    'xuwa',
    'belpn',
    'biakt',
    'bcrxb',
    'bcxns',
    'yaag',
    'bfzvr',
    'bhhcu',
    'bbbis',
    'blmbu',
    'wfdw',
    'bejdf',
    'bcpwu',
    'xojw',
    'bcwzz',
    'ysna',
    'bejoh',
    'urub',
    'bluwl',
    'bhfai',
    'bmasw',
    'blpgu',
    'yvrj',
    'bglbs',
    'bczdx',
    'bbdnv',
    'xfrq',
    'beaiz',
    'bbeyz',
    'bkdio',
    'bjitf',
    'bepyb',
    'bfplk',
    'bdpmz',
    'uugb',
    'banyb',
    'bchrz',
    'bgirx',
    'bpwhk',
    'bghlz',
    'bkuro',
    'bordx',
    'bdleg',
    'wrxj',
    'bdqxw',
    'blwwl',
    'boxqx',
    'bozdq',
    'botol',
    'bnygp',
    'basql',
    'bfwjz',
    'bpxdk',
    'baypb',
    'bmgct',
    'bcrdj',
    'bszsc',
    'btbww',
    'btdzp',
    'btfto',
    'bthpq',
    'btjhj',
    'btldj',
    'btmqn',
    'btobn',
    'btpiv',
    'btqse',
    'btroz',
    'btsup',
    'btvlv',
    'btzkp',
    'buaix',
    'bubnb',
    'bucqy',
    'bugpx',
    'bunta',
    'bupcb',
    'buqdh',
    'buuex',
    'buvgs',
    'buxug',
    'bvael',
    'bvecd',
  ]
)

const getThreads = async () => {
  const result = await get('https://forum.facepunch.com/search/?q=LMAO+(pictures+%7C%7C+pics)+v&type=Thread&forum=11')
  const html = parseHTML(result.data)
  const links = html.querySelectorAll('.searchheader a').map(e => e.attributes.href)
  const newThreads = links.map(link => link.match(/general\/([a-z]*)\/.*/)[1])

  return Array.from(new Set([...getThreadsConst(), newThreads]))
}

module.exports = {
  getThreads,
}
